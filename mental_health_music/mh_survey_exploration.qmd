---
title: "Mental Health and Musical Preferences"
author: "Meghan Harris"
format: html
engine: knitr
execute:
  echo: true
  warning: false
  error: true
# Extension configuration
filters:
  - collapse-output
extensions:
  collapse-output:
    method: javascript
format-options:
  python:
    code-formatter: none
---

# Introduction

I haven't done statistical modeling since 2021, and back then I tried using base R's `lm()` and hated it. I didn't know tidymodels existed at the time, so I assumed modeling just wasn't for me. Fast forward to 2024: I'm pivoting from data science to open source development, learning Python alongside R, and decided to revisit modeling with modern tools. This notebook compares a simple ML workflow in both R (tidymodels) and Python (scikit-learn) to:

1. Refresh my modeling skills using tidymodels (which actually makes sense to my brain)
2. Practice Python by replicating a workflow I understand in R

I'm using the [Music & Mental Health Survey Results](https://www.kaggle.com/datasets/catherinerasgaitis/mxmh-survey-results) dataset from Kaggle to predict anxiety scores from music listening habits.


# Data Import and Viewing
First, we import the data.

::: {.panel-tabset}

## R

```{r, r-data-import}
# install.packages(c("janitor", "tidyverse", "tidymodels"))
library(tidymodels)
library(tidyverse)

# Grab relative data path
data_path <-
  here::here(
    "mental_health_music",
    "data",
    "mxmh_survey_results.csv"
  )

# Import data and clean vars
df_mh_music_r <-
  read_csv(data_path) |>
  janitor::clean_names()

```

## Python

```{python, py-data-import}
import polars as pl
import janitor.polars
import plotnine as p9
from pathlib import Path

data_path = Path("data", "mxmh_survey_results.csv")

# Read in csv
df_mh_music_py = pl.read_csv(
    data_path,
    # This is needed because there's decimals in the
    # scoring cols where integer was inferred
    infer_schema_length=1000,
)

# Clean the names
df_mh_music_py = df_mh_music_py.clean_names(remove_special=True)
```

:::

Then, do a little skimming with glimpse...

::: {.panel-tabset collapse=true}

## R

```{r, r-data-glimpse}
#| output-fold: true
library(dplyr)

# Take a peek
df_mh_music_r |>
  glimpse()

```

## Python

```{python, py-data-glimpse}
# | output-fold: true
# Take a peek
df_mh_music_py.glimpse()
```

:::

# Data Exploration

Looking at the data, I'm interested in predicting "anxiety score" from musical listening patterns with respect to genre frequencies.
We'll need the `anxiety`, `frequency_*` and maybe the `hours_per_day` variables, so let's visualize what we have here.
::: {.panel-tabset collapse=true}

## R

```{r}


```

## Python

```{python}


```

:::
# Data Cleaning 

::: {.panel-tabset collapse=true}

## R

```{r}


```

## Python

```{python}


```

:::

# Train/Test Split

::: {.panel-tabset collapse=true}

## R

```{r}


```

## Python

```{python}


```

:::


# Model Building

## Recipe Definition

::: {.panel-tabset collapse=true}

## R

```{r}


```

## Python

```{python}


```

:::

## Model Specification

::: {.panel-tabset collapse=true}

## R

```{r}


```

## Python

```{python}


```

:::

## Workflow Creation

::: {.panel-tabset collapse=true}

## R

```{r}


```

## Python

```{python}


```

:::

# Model Tuning

## Cross-Validation Setup
::: {.panel-tabset collapse=true}

## R

```{r}


```

## Python

```{python}


```

:::

## Tuning Grid & Selection
::: {.panel-tabset collapse=true}

## R

```{r}


```

## Python

```{python}


```

:::

# Final Model Tuning

::: {.panel-tabset collapse=true}

## R

```{r}


```

## Python

```{python}


```

:::

# Model Evaluation

::: {.panel-tabset collapse=true}

## R

```{r}


```

## Python

```{python}


```

:::

# Comparison & Takeaways

# Conclusion

```{python, scratch-code}
#| echo: false
#| eval: false

import numpy as np
from sklearn.model_selection import train_test_split, GridSearchCV
from sklearn.preprocessing import MinMaxScaler
from sklearn.neighbors import KNeighborsClassifier
from sklearn.metrics import accuracy_score, confusion_matrix
import plotnine as p9
```